<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>spc.utf8</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="www/style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Joao Ramalho</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.hmtl">index</a>
</li>
<li>
  <a href="posts.html">Posts</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p><br><br></p>
<div id="spc" class="section level1">
<h1>SPC</h1>
<p>Adapted from <span class="citation">(Bass <a href="#ref-Bass2007" role="doc-biblioref">2007</a>)</span></p>
<p>Bamako Lightening is a company that manufactures lamps. The weight of each lamp is critical to the quality of the product. The Production Operator monitors the production process using xbar and R-charts. Samples are taken of six lamps every hour and their means and ranges plotted on control charts.</p>
<pre class="r"><code>library(readr)
library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:car&#39;:
## 
##     recode</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<p>Bamako Lightening is a company that manufactures lamps. The weight of each lamp is critical to the quality of the product. The Production Operator monitors the production process using xbar and R-charts. Samples are taken of six lamps every hour and their means and ranges plotted on control charts. Data is available representing samples taken a period of 25 hours of production.</p>
<p>Start by loading a csv file from our github repository into our R session:</p>
<pre class="r"><code>bamako &lt;- readr::read_csv(&quot;data/Bamako.csv&quot;)</code></pre>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   Hour = col_character(),
##   Sample1 = col_double(),
##   Sample2 = col_double(),
##   Sample3 = col_double(),
##   Sample4 = col_double(),
##   Sample5 = col_double(),
##   Sample6 = col_double()
## )</code></pre>
<pre class="r"><code>bamako &lt;- readr::read_csv(
  file = &quot;https://raw.githubusercontent.com/J-Ramalho/J-Ramalho.github.io/master/data/Bamako.csv&quot;)</code></pre>
<p>The message shows that the loading has worked correctly as all columns have been parsed with type double. Looking at the first five lines to confirm and assess the quality of our data for further processing.</p>
<pre class="r"><code>head(bamako)</code></pre>
<pre><code>## # A tibble: 6 x 7
##   Hour  Sample1 Sample2 Sample3 Sample4 Sample5 Sample6
##   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Hour1    9.99   10.0     9.97   10.0     9.97    9.95
## 2 Hour2    9.97    9.96    9.94    9.97   10.0    10.0 
## 3 Hour3    9.98   10.0     9.94   10.1    10.0    10.1 
## 4 Hour4   10.1    10.1     9.95   10.0    10.0    10.0 
## 5 Hour5   10.0     9.98    9.94    9.94   10.0    10.0 
## 6 Hour6   10.0    10.0     9.97   10.0    10.0     9.96</code></pre>
<p>In this table each line corresponds to a sampling hour and each column corresponds to a sample number.</p>
<p><em>xbar and R charts</em></p>
<p>The package {qcc} has been selected to create the control charts.</p>
<pre class="r"><code>library(qcc)</code></pre>
<pre><code>## Package &#39;qcc&#39; version 2.7</code></pre>
<pre><code>## Type &#39;citation(&quot;qcc&quot;)&#39; for citing this R package in publications.</code></pre>
<p>The chart ploting function qcc() already considers that each line corresponds to a sampling event and requires as argument a table containing only the sampling values. For that the Hour column has to be removed.</p>
<pre class="r"><code>bamako_clean &lt;- bamako %&gt;% dplyr::select(-Hour)</code></pre>
<p>Before entering regular production it is recommended to run a “calibration run”. The calibration run is used to calculate the control limits. Using the first 10 samples a default Shewart xbar chart can be obtained as follows:</p>
<pre class="r"><code>qcc(bamako_clean[1:10, ], 
    type = &quot;xbar&quot;, 
    title = &quot;Lamp weight \n xbar chart&quot;, 
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="spc_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = bamako_clean[1:10, ], type = &quot;xbar&quot;, title = &quot;Lamp weight \n xbar chart&quot;,      xlab = &quot;Sample group&quot;)
##  $ type      : chr &quot;xbar&quot;
##  $ data.name : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data      : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:10] 9.99 9.98 10.02 10.03 9.99 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center    : num 10
##  $ std.dev   : num 0.0402
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 9.95 10.05
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<pre class="r"><code>qcc(bamako_clean[1:10, ], 
    type = &quot;R&quot;, 
    title = &quot;Lamp weight \n R chart&quot;,
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="spc_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<pre><code>## List of 11
##  $ call      : language qcc(data = bamako_clean[1:10, ], type = &quot;R&quot;, title = &quot;Lamp weight \n R chart&quot;,      xlab = &quot;Sample group&quot;)
##  $ type      : chr &quot;R&quot;
##  $ data.name : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data      : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics: Named num [1:10] 0.0652 0.0833 0.1302 0.1286 0.0818 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes     : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center    : num 0.102
##  $ std.dev   : num 0.0402
##  $ nsigmas   : num 3
##  $ limits    : num [1, 1:2] 0 0.204
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations:List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<p>Afterwards, the production samples can be assessed against those limits and the control chart rules can be verified. In this example the shewhart rules are used.</p>
<pre class="r"><code>qcc(data = bamako_clean[1:10, ],
    newdata = bamako_clean[11:25,],
    type = &quot;xbar&quot;, 
    title = &quot;Lamp weight \n xbar chart&quot;, 
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="spc_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = bamako_clean[1:10, ], type = &quot;xbar&quot;, newdata = bamako_clean[11:25,      ], title = &quot;Lamp weight \n xba| __truncated__
##  $ type        : chr &quot;xbar&quot;
##  $ data.name   : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data        : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:10] 9.99 9.98 10.02 10.03 9.99 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center      : num 10
##  $ std.dev     : num 0.0402
##  $ newstats    : Named num [1:15] 9.98 9.99 10.01 10.01 10.02 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; ...
##  $ newdata     : num [1:15, 1:6] 9.94 10.01 10.01 9.98 10.03 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : int [1:15] 6 6 6 6 6 6 6 6 6 6 ...
##  $ newdata.name: chr &quot;bamako_clean[11:25, ]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 9.95 10.05
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
<pre class="r"><code>qcc(data = bamako_clean[1:10, ],
    newdata = bamako_clean[11:25,], 
    type = &quot;R&quot;, 
    title = &quot;Lamp weight \n R chart&quot;,
    xlab = &quot;Sample group&quot;)</code></pre>
<p><img src="spc_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre><code>## List of 15
##  $ call        : language qcc(data = bamako_clean[1:10, ], type = &quot;R&quot;, newdata = bamako_clean[11:25,      ], title = &quot;Lamp weight \n R char| __truncated__
##  $ type        : chr &quot;R&quot;
##  $ data.name   : chr &quot;bamako_clean[1:10, ]&quot;
##  $ data        : num [1:10, 1:6] 9.99 9.97 9.98 10.07 10.01 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ statistics  : Named num [1:10] 0.0652 0.0833 0.1302 0.1286 0.0818 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:10] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; ...
##  $ sizes       : int [1:10] 6 6 6 6 6 6 6 6 6 6
##  $ center      : num 0.102
##  $ std.dev     : num 0.0402
##  $ newstats    : Named num [1:15] 0.1202 0.1434 0.0638 0.0946 0.1016 ...
##   ..- attr(*, &quot;names&quot;)= chr [1:15] &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; ...
##  $ newdata     : num [1:15, 1:6] 9.94 10.01 10.01 9.98 10.03 ...
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ newsizes    : int [1:15] 6 6 6 6 6 6 6 6 6 6 ...
##  $ newdata.name: chr &quot;bamako_clean[11:25, ]&quot;
##  $ nsigmas     : num 3
##  $ limits      : num [1, 1:2] 0 0.204
##   ..- attr(*, &quot;dimnames&quot;)=List of 2
##  $ violations  :List of 2
##  - attr(*, &quot;class&quot;)= chr &quot;qcc&quot;</code></pre>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-Bass2007">
<p>Bass, Issa. 2007. <em>Six Sigma Statistics with Excel and Minitab</em>. 1st ed. McGraw-Hill.</p>
</div>
</div>
</div>

<hr>
<div style="font-family: Arial; text-align:right;">
  <a href="https://www.linkedin.com/in/joaoramalho/" target="_blank">
    <img src="img/linkedin.png" width="25px"/>
  </a>
  <a href="https://github.com/J-Ramalho" target="_blank">
    <img src="img/github.png" width="25px"/>
  </a>
</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
